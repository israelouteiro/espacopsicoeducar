{"ast":null,"code":"import _asyncToGenerator from\"/Users/israelouteiro/Desktop/EspacoPsicoEducar/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/israelouteiro/Desktop/EspacoPsicoEducar/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/israelouteiro/Desktop/EspacoPsicoEducar/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/israelouteiro/Desktop/EspacoPsicoEducar/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/israelouteiro/Desktop/EspacoPsicoEducar/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState}from\"react\";import{useHistory}from'react-router-dom';import{toast}from'react-toastify';import Input from'components/Input';import{FormTitle,FormText,FormSpacer}from'./styled';import Button from\"components/Button\";import ContainerUnauthenticated from\"containers/Unauthenticated\";import{DoForgotPassword}from\"services/authentication\";import{exposeStrapiError}from\"utils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Forgot(){var history=useHistory();var navigate=function navigate(to){return history.push(\"/\".concat(to));};var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),form=_useState4[0],setForm=_useState4[1];var formValue=function formValue(ref){return form!==null&&form!==void 0&&form[ref]?form===null||form===void 0?void 0:form[ref]:'';};var changeForm=function changeForm(value,ref){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},ref,value)));};var valid=function valid(){var verbose=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!formValue('email')||!formValue('email').length){if(verbose){toast.error('Preencha o campo: Email');}return false;}return true;};var action=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _formValue;var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(valid(true)){_context.next=2;break;}return _context.abrupt(\"return\");case 2:setLoading(true);_context.next=5;return DoForgotPassword({email:(_formValue=formValue('email'))===null||_formValue===void 0?void 0:_formValue.replace(/ /g,'')});case 5:result=_context.sent;setLoading(false);if(result&&!exposeStrapiError(result)){completNext();}case 8:case\"end\":return _context.stop();}}},_callee);}));return function action(){return _ref.apply(this,arguments);};}();var completNext=function completNext(){toast.success('Instruções para recuperar senha foram enviadas ao seu email');navigate('login');};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(ContainerUnauthenticated,{children:[/*#__PURE__*/_jsx(FormTitle,{children:\"Esqueceu a senha?\"}),/*#__PURE__*/_jsx(FormText,{children:\"Informe seu email para recuperar a senha\"}),/*#__PURE__*/_jsx(Input,{placeholder:\"E-mail\",value:formValue('email'),onChange:function onChange(e){return changeForm(e.target.value,'email');}}),/*#__PURE__*/_jsx(FormSpacer,{}),/*#__PURE__*/_jsx(Button,{primary:true,loading:loading,onClick:action,children:\"Criar conta\"}),/*#__PURE__*/_jsx(Button,{primary:true,outline:true,onClick:function onClick(){return history.goBack();},children:\"Voltar\"})]})});}","map":{"version":3,"sources":["/Users/israelouteiro/Desktop/EspacoPsicoEducar/src/screens/Authentication/Forgot/index.js"],"names":["React","useState","useHistory","toast","Input","FormTitle","FormText","FormSpacer","Button","ContainerUnauthenticated","DoForgotPassword","exposeStrapiError","Forgot","history","navigate","to","push","loading","setLoading","form","setForm","formValue","ref","changeForm","value","valid","verbose","length","error","action","email","replace","result","completNext","success","e","target","goBack"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\"; \nimport { useHistory } from 'react-router-dom';\nimport { toast } from 'react-toastify';\n\nimport Input from 'components/Input'\n\nimport { \n    FormTitle,\n    FormText,\n    FormSpacer \n} from './styled'\n\n\nimport Button from \"components/Button\";\n\nimport ContainerUnauthenticated from \"containers/Unauthenticated\";\nimport { DoForgotPassword } from \"services/authentication\";\nimport { exposeStrapiError } from \"utils\";\n\nexport default function Forgot(){ \n    const history = useHistory();\n    const navigate = to => history.push(`/${ to }`);\n\n    const [ loading, setLoading ] = useState(false) \n    \n    const [ form, setForm ] = useState({})\n    const formValue = ref => { return form?.[ref] ? form?.[ref] : '' ;}\n    const changeForm = ( value, ref ) => { setForm({ ...form, [ref]: value }) ;} \n\n    const valid = (verbose = false) => {  \n              \n        if(!formValue('email') || !formValue('email').length){ \n            if(verbose){ toast.error('Preencha o campo: Email') ;}\n            return false; \n        }   \n\n        return true\n    } \n\n    const action = async () => {\n        if(!valid(true)){ return ;}\n        setLoading(true)\n        \n        const result = await DoForgotPassword({ email:formValue('email')?.replace(/ /g,'') })   \n        \n        setLoading(false)\n        if(result && !exposeStrapiError(result)){\n            completNext()\n        } \n    }\n\n    const completNext = () => {\n        toast.success('Instruções para recuperar senha foram enviadas ao seu email'); \n        navigate('login')\n    } \n\n \n    return ( \n        <>  \n            <ContainerUnauthenticated> \n                <FormTitle>Esqueceu a senha?</FormTitle>\n                <FormText>Informe seu email para recuperar a senha</FormText> \n                <Input placeholder=\"E-mail\" value={formValue('email')} onChange={e => changeForm(e.target.value, 'email')}  /> \n                <FormSpacer />\n                <Button primary loading={loading} onClick={action} >Criar conta</Button> \n                <Button primary outline onClick={() => history.goBack()}>Voltar</Button>  \n            </ContainerUnauthenticated> \n        </>\n    );\n}"]},"metadata":{},"sourceType":"module"}