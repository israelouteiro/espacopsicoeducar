{"ast":null,"code":"import _asyncToGenerator from\"/Users/israelouteiro/Desktop/EspacoPsicoEducar/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/israelouteiro/Desktop/EspacoPsicoEducar/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/israelouteiro/Desktop/EspacoPsicoEducar/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/israelouteiro/Desktop/EspacoPsicoEducar/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/israelouteiro/Desktop/EspacoPsicoEducar/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState}from\"react\";import{useHistory}from'react-router-dom';import{toast}from'react-toastify';import Input from'components/Input';import{FormTitle,FormText,FormSpacer,RegisterCall}from'./styled';import Button from\"components/Button\";import ContainerUnauthenticated from\"containers/Unauthenticated\";import{DoRegister}from\"services/authentication\";import{exposeStrapiError}from\"utils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Register(){var history=useHistory();var navigate=function navigate(to){return history.push(\"/\".concat(to));};var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),form=_useState4[0],setForm=_useState4[1];var formValue=function formValue(ref){return form!==null&&form!==void 0&&form[ref]?form===null||form===void 0?void 0:form[ref]:'';};var changeForm=function changeForm(value,ref){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},ref,value)));};var valid=function valid(){var verbose=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!formValue('name')||!formValue('name').length){if(verbose){toast.error('Preencha o campo: Nome');}return false;}if(!formValue('email')||!formValue('email').length){if(verbose){toast.error('Preencha o campo: Email');}return false;}if(!formValue('password')||!formValue('password').length){if(verbose){toast.error('Preencha o campo: Senha');}return false;}return true;};var action=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _form$email,_form$email2;var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(valid(true)){_context.next=2;break;}return _context.abrupt(\"return\");case 2:setLoading(true);_context.next=5;return DoRegister(_objectSpread(_objectSpread({},form),{},{username:(_form$email=form.email)===null||_form$email===void 0?void 0:_form$email.replace(/ /g,''),email:(_form$email2=form.email)===null||_form$email2===void 0?void 0:_form$email2.replace(/ /g,''),confirmed:true,blocked:false}));case 5:result=_context.sent;setLoading(false);if(result&&!exposeStrapiError(result)){completeLogin();}case 8:case\"end\":return _context.stop();}}},_callee);}));return function action(){return _ref.apply(this,arguments);};}();var completeLogin=function completeLogin(){toast.success('Conta criada com sucesso');navigate('login');};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(ContainerUnauthenticated,{children:[/*#__PURE__*/_jsx(FormTitle,{children:\"Novo por aqui?\"}),/*#__PURE__*/_jsx(FormText,{children:\"Cadastre-se gr\\xE1tis :)\"}),/*#__PURE__*/_jsx(Input,{placeholder:\"Nome\",value:formValue('name'),onChange:function onChange(e){return changeForm(e.target.value,'name');}}),/*#__PURE__*/_jsx(FormSpacer,{}),/*#__PURE__*/_jsx(Input,{placeholder:\"E-mail\",value:formValue('email'),onChange:function onChange(e){return changeForm(e.target.value,'email');}}),/*#__PURE__*/_jsx(FormSpacer,{}),/*#__PURE__*/_jsx(Input,{placeholder:\"Senha\",type:\"password\",value:formValue('password'),onChange:function onChange(e){return changeForm(e.target.value,'password');}}),/*#__PURE__*/_jsx(FormSpacer,{}),/*#__PURE__*/_jsx(Button,{primary:true,loading:loading,onClick:action,children:\"Criar conta\"}),/*#__PURE__*/_jsx(RegisterCall,{children:\" J\\xE1 possui uma conta? \"}),/*#__PURE__*/_jsx(Button,{primary:true,outline:true,onClick:function onClick(){return navigate('login');},children:\"Fa\\xE7a o login\"})]})});}","map":{"version":3,"sources":["/Users/israelouteiro/Desktop/EspacoPsicoEducar/src/screens/Authentication/Register/index.js"],"names":["React","useState","useHistory","toast","Input","FormTitle","FormText","FormSpacer","RegisterCall","Button","ContainerUnauthenticated","DoRegister","exposeStrapiError","Register","history","navigate","to","push","loading","setLoading","form","setForm","formValue","ref","changeForm","value","valid","verbose","length","error","action","username","email","replace","confirmed","blocked","result","completeLogin","success","e","target"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\"; \nimport { useHistory } from 'react-router-dom'; \nimport { toast } from 'react-toastify';\n\nimport Input from 'components/Input'\n\nimport { \n    FormTitle,\n    FormText,\n    FormSpacer,\n    RegisterCall\n} from './styled'\n\nimport Button from \"components/Button\";\n\nimport ContainerUnauthenticated from \"containers/Unauthenticated\";\nimport { DoRegister } from \"services/authentication\";\nimport { exposeStrapiError } from \"utils\"; \n\nexport default function Register(){ \n\n    const history = useHistory();\n    const navigate = to => history.push(`/${ to }`);\n\n    const [ loading, setLoading ] = useState(false) \n    \n    const [ form, setForm ] = useState({})\n    const formValue = ref => { return form?.[ref] ? form?.[ref] : '' ;}\n    const changeForm = ( value, ref ) => { setForm({ ...form, [ref]: value }) ;} \n\n    const valid = (verbose = false) => {  \n\n        if(!formValue('name') || !formValue('name').length){ \n            if(verbose){ toast.error('Preencha o campo: Nome') ;}\n            return false; \n        }  \n\n        if(!formValue('email') || !formValue('email').length){ \n            if(verbose){ toast.error('Preencha o campo: Email') ;}\n            return false; \n        }  \n\n        if(!formValue('password') || !formValue('password').length){ \n            if(verbose){ toast.error('Preencha o campo: Senha') ;}\n            return false; \n        }  \n\n        return true\n    } \n\n    const action = async () => {\n        if(!valid(true)){ return ;}\n        setLoading(true)\n        \n        const result = await DoRegister({\n            ...form, \n            username: form.email?.replace(/ /g,''),\n            email: form.email?.replace(/ /g,''),\n            confirmed:true,\n            blocked:false\n        })  \n        \n        setLoading(false)\n        if(result && !exposeStrapiError(result)){\n            completeLogin()\n        } \n    }\n\n    const completeLogin = () => {\n        toast.success('Conta criada com sucesso'); \n        navigate('login')\n    } \n\n \n    return ( \n        <>  \n            <ContainerUnauthenticated> \n                <FormTitle>Novo por aqui?</FormTitle>\n                <FormText>Cadastre-se grátis :)</FormText> \n                <Input placeholder=\"Nome\" value={formValue('name')} onChange={e => changeForm(e.target.value, 'name')} /> \n                <FormSpacer />\n                <Input placeholder=\"E-mail\" value={formValue('email')} onChange={e => changeForm(e.target.value, 'email')} /> \n                <FormSpacer />\n                <Input placeholder=\"Senha\" type=\"password\" value={formValue('password')} onChange={e => changeForm(e.target.value, 'password')}  />    \n                <FormSpacer /> \n                <Button primary loading={loading} onClick={action}>Criar conta</Button> \n                <RegisterCall> Já possui uma conta? </RegisterCall>\n                <Button primary outline onClick={() => navigate('login')}>Faça o login</Button> \n            </ContainerUnauthenticated> \n        </>\n    );\n}"]},"metadata":{},"sourceType":"module"}