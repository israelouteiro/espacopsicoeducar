{"ast":null,"code":"import _asyncToGenerator from\"/Users/israelouteiro/Desktop/EspacoPsicoEducar/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/israelouteiro/Desktop/EspacoPsicoEducar/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/israelouteiro/Desktop/EspacoPsicoEducar/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/israelouteiro/Desktop/EspacoPsicoEducar/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/israelouteiro/Desktop/EspacoPsicoEducar/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState}from\"react\";import{useHistory}from'react-router-dom';import{toast}from'react-toastify';import Input from'components/Input';import{FormTitle,FormText,FormSpacer}from'./styled';import Button from\"components/Button\";import ContainerUnauthenticated from\"containers/Unauthenticated\";import{DoResetPassword}from\"services/authentication\";import{exposeStrapiError}from\"utils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function CreatePassword(){var history=useHistory();var navigate=function navigate(to){return history.push(\"/\".concat(to));};var params=new URLSearchParams(window.location.search);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),form=_useState4[0],setForm=_useState4[1];var formValue=function formValue(ref){return form!==null&&form!==void 0&&form[ref]?form===null||form===void 0?void 0:form[ref]:'';};var changeForm=function changeForm(value,ref){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},ref,value)));};var valid=function valid(){var verbose=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!formValue('password')||!formValue('password').length){if(verbose){toast.error('Preencha o campo: Nova senha');}return false;}if(!formValue('cpassword')||!formValue('cpassword').length){if(verbose){toast.error('Preencha o campo: Confirmar nova senha');}return false;}if(formValue('password')!==formValue('cpassword')){if(verbose){toast.error('Nova senha e confirmação da nova senha não são iguais');}return false;}return true;};var action=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(valid(true)){_context.next=2;break;}return _context.abrupt(\"return\");case 2:setLoading(true);_context.next=5;return DoResetPassword({code:params.get('code'),password:formValue('password'),passwordConfirmation:formValue('cpassword')});case 5:result=_context.sent;setLoading(false);if(result&&!exposeStrapiError(result)){completNext();}case 8:case\"end\":return _context.stop();}}},_callee);}));return function action(){return _ref.apply(this,arguments);};}();var completNext=function completNext(){toast.success('Senha criada com sucesso');navigate('login');};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(ContainerUnauthenticated,{children:[/*#__PURE__*/_jsx(FormTitle,{children:\"Cria sua nova senha!\"}),/*#__PURE__*/_jsx(FormText,{children:\"Informe sua nova senha no campo abaixo\"}),/*#__PURE__*/_jsx(Input,{placeholder:\"Nova Senha\",type:\"password\",value:formValue('password'),onChange:function onChange(e){return changeForm(e.target.value,'password');}}),/*#__PURE__*/_jsx(FormSpacer,{}),/*#__PURE__*/_jsx(Input,{placeholder:\"Confirmar nova Senha\",type:\"password\",value:formValue('cpassword'),onChange:function onChange(e){return changeForm(e.target.value,'cpassword');}}),/*#__PURE__*/_jsx(FormSpacer,{}),/*#__PURE__*/_jsx(Button,{primary:true,loading:loading,onClick:action,children:\"Criar senha\"}),/*#__PURE__*/_jsx(Button,{primary:true,outline:true,onClick:function onClick(){return navigate('login');},children:\"Cancelar\"})]})});}","map":{"version":3,"sources":["/Users/israelouteiro/Desktop/EspacoPsicoEducar/src/screens/Authentication/CreatePassword/index.js"],"names":["React","useState","useHistory","toast","Input","FormTitle","FormText","FormSpacer","Button","ContainerUnauthenticated","DoResetPassword","exposeStrapiError","CreatePassword","history","navigate","to","push","params","URLSearchParams","window","location","search","loading","setLoading","form","setForm","formValue","ref","changeForm","value","valid","verbose","length","error","action","code","get","password","passwordConfirmation","result","completNext","success","e","target"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\"; \nimport { useHistory } from 'react-router-dom';\nimport { toast } from 'react-toastify';\n\nimport Input from 'components/Input'\n\nimport { \n    FormTitle,\n    FormText,\n    FormSpacer\n} from './styled' \n\nimport Button from \"components/Button\";\n\nimport ContainerUnauthenticated from \"containers/Unauthenticated\";\nimport { DoResetPassword } from \"services/authentication\";\nimport { exposeStrapiError } from \"utils\";\n\nexport default function CreatePassword(){ \n    const history = useHistory();\n    const navigate = to => history.push(`/${ to }`);\n\n    const params = new URLSearchParams(window.location.search)\n    const [ loading, setLoading ] = useState(false) \n    \n    const [ form, setForm ] = useState({})\n    const formValue = ref => { return form?.[ref] ? form?.[ref] : '' ;}\n    const changeForm = ( value, ref ) => { setForm({ ...form, [ref]: value }) ;} \n\n    const valid = (verbose = false) => { \n\n        if(!formValue('password') || !formValue('password').length){ \n            if(verbose){ toast.error('Preencha o campo: Nova senha') ;}\n            return false; \n        } \n        \n        if(!formValue('cpassword') || !formValue('cpassword').length){ \n            if(verbose){ toast.error('Preencha o campo: Confirmar nova senha') ;}\n            return false; \n        } \n        \n        if( formValue('password') !== formValue('cpassword')){ \n            if(verbose){ toast.error('Nova senha e confirmação da nova senha não são iguais') ;}\n            return false; \n        } \n\n        return true\n    }\n\n    const action = async () => {\n        if(!valid(true)){ return ;}\n        setLoading(true)\n        \n        const result =  await DoResetPassword({\n            code: params.get('code'),\n            password: formValue('password'),\n            passwordConfirmation: formValue('cpassword')\n        })   \n        \n        setLoading(false)\n        if(result && !exposeStrapiError(result)){\n            completNext()\n        } \n    }\n\n    const completNext = () => {\n        toast.success('Senha criada com sucesso'); \n        navigate('login')\n    } \n \n    return ( \n        <>  \n            <ContainerUnauthenticated> \n                <FormTitle>Cria sua nova senha!</FormTitle>\n                <FormText>Informe sua nova senha no campo abaixo</FormText> \n                <Input placeholder=\"Nova Senha\" type=\"password\" value={formValue('password')} onChange={e => changeForm(e.target.value, 'password')} />   \n                <FormSpacer />\n                <Input placeholder=\"Confirmar nova Senha\" type=\"password\" value={formValue('cpassword')} onChange={e => changeForm(e.target.value, 'cpassword')} />   \n                <FormSpacer />\n                <Button primary loading={loading} onClick={action}>Criar senha</Button> \n                <Button primary outline onClick={() => navigate('login')}>Cancelar</Button> \n            </ContainerUnauthenticated> \n        </>\n    );\n}"]},"metadata":{},"sourceType":"module"}